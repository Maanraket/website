{"version":3,"sources":["js/main.js"],"names":["img","c","blendModes","blendModeIterator","frameSize","resizeWidth","resizeHeight","maskPosWidth","maskPosHeight","webcamMode","capture","maskImage","preload","console","log","loadImage","setup","createCanvas","windowWidth","windowHeight","imageMode","CENTER","image","width","height","createGraphics","BLEND","DARKEST","LIGHTEST","DIFFERENCE","OVERLAY","HARD_LIGHT","SOFT_LIGHT","DODGE","BURN","ADD","iterateBlendMode","redrawFrameSizeParams","draw","drawMask","drawImage","_frameSize","rect","erase","mouseX","mouseY","noErase","mask","get","resize","set","updatePixels","mouseWheel","event","delta","print","setRandomBackground","_img","blendMode","refreshBackground","toggleWebcamMode","createCapture","VIDEO","size","remove","length","keyTyped","key","windowResized","resizeCanvas"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["let img, c, blendModes, blendModeIterator, frameSize, resizeWidth, resizeHeight, maskPosWidth, maskPosHeight, webcamMode, capture, maskImage;\n\n/*\nTODO:\ncreate modal window with commands that can be Closed\ncreate ASCII filter for the canvas\nMake bg image fit the screen properly on mobile\n*/\n\nfunction preload(){\n  console.log('hier dan');\n  img = loadImage('./img/bg.jpeg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight);\n  imageMode(CENTER);\n  image(img, width/2, height/2, width, height);\n  webcamMode = false;\n  maskImage = createGraphics(width,height);\n  blendModes = [BLEND, DARKEST, LIGHTEST, DIFFERENCE, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, BURN, ADD];\n  blendModeIterator = 0;\n  iterateBlendMode();\n  console.log('hallo')\n\n  //frame gets divided by 'frameSize' to determine size of next frame\n  frameSize = 1.3;\n  redrawFrameSizeParams(frameSize);\n}\n\nfunction draw(){\n  if(webcamMode) {\n    drawMask();\n    image(capture, width/2, height/2, width, height);\n  }\n  drawImage();\n}\n\nfunction redrawFrameSizeParams(_frameSize = frameSize){\n  //Precalculates values based on frameSize to save computation time\n  //resizeWidth and resizeHeight are the dimensions of the drawn frame\n  resizeWidth = width / frameSize;\n  resizeHeight = height / frameSize;\n  //maskPosWidth and maskPosHeight are used to calculate the position of the mask\n  maskPosWidth = width/(frameSize*2);\n  maskPosHeight = height/(frameSize*2);\n}\n\nfunction drawMask(){\n  // create mask\n  maskImage.rect(0,0,width, height);\n  maskImage.erase();\n  maskImage.rect(mouseX-maskPosWidth,mouseY-maskPosHeight,resizeWidth,resizeHeight);\n  maskImage.noErase();\n  capture.mask(maskImage);\n}\n\nfunction drawImage(){\n  c = get();\n  c.resize(resizeWidth, resizeHeight);\n  c.set();\n  c.updatePixels();\n  image(c, mouseX, mouseY);\n}\n\nfunction mouseWheel(event) {\n  frameSize -= event.delta/500;\n  if(frameSize < 1) {\n    frameSize = 1;\n  }\n  print(\"DAYUM DAWG, YOU BE DIVIDIN' Y'ALL FRAME BY \" + frameSize + \"!\");\n  redrawFrameSizeParams();\n  //uncomment to block page scrolling\n  return false;\n}\n\nfunction setRandomBackground(){\n  img = loadImage('https://picsum.photos/' + width + '/' + height, _img => {\n    blendMode(blendModes[0]);\n    image(_img, width/2, height/2, width, height);\n  });\n}\n\nfunction refreshBackground(){\n  blendMode(blendModes[0]);\n  if(webcamMode) {\n    image(capture, width/2, height/2, width, height);\n  } else {\n    image(img, width/2, height/2, width);\n  }\n}\n\nfunction toggleWebcamMode(){\n  if(!webcamMode){\n    capture = createCapture(VIDEO);\n    capture.size(width, height);\n  } else {\n    capture.remove();\n  }\n  webcamMode = !webcamMode;\n}\n\nfunction iterateBlendMode(){\n  if(blendModeIterator>blendModes.length-1) {\n    blendModeIterator = 0;\n  }\n  blendMode(blendModes[blendModeIterator]);\n  blendModeIterator++;\n}\n\nfunction keyTyped() {\n  if (key==='m') {\n    print(\"BLENDMODE CHANGE! \" + blendModes[blendModeIterator]);\n    iterateBlendMode();\n  } else if (key===\"r\") {\n    print('REFRESH!');\n    refreshBackground();\n  } else if (key === \"p\") {\n    print(\"CHANGE MY PICTURE!\");\n    setRandomBackground();\n  } else if (key === \"c\") {\n    print(\"TOGGLE WEBCAM MODE!\");\n    toggleWebcamMode();\n  }\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n  redrawFrameSizeParams();\n  if(!webcamMode)\n    setRandomBackground();\n}\n"]}